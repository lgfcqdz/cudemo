一、单元测试的核心策略
1. ​测试金字塔策略
↗ UI Tests (少量)
   ↗ Integration Tests (适量)
  ↗ Unit Tests (大量基础)
  
2. ​FIRST 原则​
•Fast（快速）：测试应该快速执行
•Independent（独立）：测试之间不相互依赖
•​Repeatable（可重复）：在任何环境都能重复执行
•Self-validating（自验证）：测试结果应该明确（通过/失败）
•Timely（及时）：在代码编写前或同时编写测试  

二、全面的测试覆盖策略
1. ​代码覆盖率类型：
行覆盖、路径覆盖、条件覆盖、分支覆盖（true、false）
2. ​测试层次结构
// 分层测试架构
src/test/java/com/yourproject/
├── unit/                    # 单元测试
│   ├── service/
│   ├── mapper/
│   └── util/
├── integration/            # 集成测试
│   ├── ServiceIntegrationTest.java
│   └── RepositoryIntegrationTest.java
├── component/              # 组件测试
└── contract/               # 契约测试

三、具体的测试策略和方法
1. ​基于输入的测试策略
// 等价类划分：有效输入
// 边界值分析：无效邮箱格式
// 特殊值测试：null 值
2. ​基于状态的测试策略
// 初始状态：PENDING
// 最终状态：CANCELLED
// 状态转换测试：SHIPPED -> CANCELLED 应该失败
3. ​基于交互的测试策略
// 使用 Mock 测试外部依赖交互
四、Spring Boot 特定测试策略
1. ​分层测试策略
2. ​数据库测试策略

五、测试数据策略
1. ​测试数据工厂
2. ​参数化测试

测试质量评估指标
1. ​量化指标​
•代码覆盖率​：行覆盖 > 80%，分支覆盖 > 70%
•测试通过率​：100% 通过
•测试执行时间​：单元测试 < 5分钟，全部测试 < 15分钟

2. ​质化指标​
•测试可读性​：测试名称清晰，结构明确
•测试维护性​：易于修改和扩展
•​测试可靠性​：不产生假阳性/假阴性

最佳实践总结
•测试命名规范​：MethodName_StateUnderTest_ExpectedBehavior
•单一职责​：每个测试只验证一个行为
•准备-执行-断言​：明确区分测试阶段
•使用合适的测试双精度​：Mock、Stub、Spy 等
•定期重构测试​：保持测试代码质量
•持续集成​：自动化测试执行

一、测试替身（Test Doubles）概述
测试替身是在测试中用来替代真实组件的对象，主要有以下几种类型：

1. ​Mock（模拟对象）​​
​用途​：验证对象之间的交互行为​

​特点​：关注"方法是否被调用"，"调用了几次"，"参数是什么"

2. ​Stub（桩对象）​​
​用途​：提供预设的响应数据​

​特点​：关注"方法调用返回什么结果"

3. ​Spy（间谍对象）​​
​用途​：​包装真实对象，同时记录调用信息

​特点​：既执行真实逻辑，又记录交互信息
注意：
验证外部服务调用-Mock​-关注是否调用、调用次数

模拟数据库返回值-Stub​-关注返回什么数据

测试部分真实逻辑-Spy​-需要真实逻辑+调用验证

集成测试-Spy​ + 真实对象-平衡测试速度和真实性

单元测试-Mock​ + ​Stub​-快速、隔离

六、最佳实践
1.单一职责​：每个测试只使用一种双精度类型
2.​明确意图​：根据测试目标选择合适类型
3.避免过度 Mock​：不要 Mock 被测类本身
4.保持真实​：在可能的情况下使用真实对象